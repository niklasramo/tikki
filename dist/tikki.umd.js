!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("eventti")):"function"==typeof define&&define.amd?define(["exports","eventti"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).tikki={},t.eventti)}(this,(function(t,e){"use strict";t.Ticker=class{phases;autoTick;_raf;_queue;_emitter;constructor(t={}){const{phases:i=[],autoTick:s=!0}=t;this.phases=i,this.autoTick=s,this._raf=null,this._emitter=new e.Emitter,this._queue=[],this.tick=this.tick.bind(this)}tick(t){this._raf=null;const{_queue:e,phases:i}=this;if(e.length)throw new Error("Can't tick before the previous tick has finished.");let s,n,r,o,h,u;for(s=0,r=i.length;s<r;s++)u=this._emitter._getListeners(i[s]),u&&e.push(u);for(s=0,r=e.length;s<r;s++)for(h=e[s],n=0,o=h.length;n<o;n++)h[n](t);e.length=0,this.autoTick&&this._emitter.listenerCount()&&this.start()}start(){this.autoTick&&null===this._raf&&(this._raf=requestAnimationFrame(this.tick))}stop(){null!==this._raf&&(cancelAnimationFrame(this._raf),this._raf=null)}on(t,e){const i=this._emitter.on(t,e);return this.start(),i}once(t,e){const i=this._emitter.once(t,e);return this.start(),i}off(t,e){return this._emitter.off(t,e)}listenerCount(t){return this._emitter.listenerCount(t)}},Object.defineProperty(t,"__esModule",{value:!0})}));